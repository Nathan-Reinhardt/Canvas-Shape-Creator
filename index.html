<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <!-- second page javascript file -->
  <script type="application/javascript" src="./assets/nonrel_functions.js"></script>
  <!-- stylesheets -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="./stylesheets/reset.css">
  <link rel="stylesheet" href="./stylesheets/title.css">
  <link rel="stylesheet" href="./stylesheets/canvas.css">
  <link rel="stylesheet" href="./stylesheets/slider.css">
  <link rel="stylesheet" href="./stylesheets/buttons.css">
  <link rel="stylesheet" href="./stylesheets/background.css">
  <link rel="stylesheet" href="./stylesheets/colorpicker.css">
  <link rel="stylesheet" href="./stylesheets/howtopage.css">
  <title>Canvas Shape Creator</title>
</head>
<body>
  <!-- main canvas page -->
  <div id="root">
    <div id="content-container">
      <div id="side-bar">
        <div id="curr-full-cont">
          <div id="curr-drawing-cont">
            <h1 id="current-drawing"></h1>
          </div>
          <div id="drawing-but-container">
            <button id="drawing-1">Drawing #1</button>
            <button id="drawing-2">Drawing #2</button>
            <button id="drawing-3">Drawing #3</button>
          </div>
        </div>
        <div id="big-shape-cont">
          <div id="select-shape-container">
            <h1 id="current-selection"></h1>
          </div>
          <div id="button-container">
            <button id="box">Box</button>
            <button id="pentagon">Pentagon</button>
            <button id="star">Star</button>
          </div>
        </div>
        <div id="big-slide-cont">
          <div id="pen-cont">
            <h1 id="pen-settings">Pen Settings</h1>
          </div>
          <div id="slide-container">
            <div id="line-width-cont">
              <p id="p-w">Line Width: <span id="line-w"></span></p>
            </div>
            <input type="range" min="4" max="35" value="5" class="slider" id="myRange">
            <div id="checkbox-container">
              <h1 id="fill-title">Fill Shape: </h1>
              <input type="checkbox" id="myCheck" onchange="check()">
            </div>
            <div id="all-lc-container">
              <div id="line-color-container">
                <h1 id="line-color-title">Line Color: </h1>
                <input type="color" id="myColor" onchange="lineColor()">
              </div>
              <h1 id="actual-l-color"></h1>
            </div>
            <div id="all-fc-container">
              <div id="fill-color-container">
                <h1 id="fill-color-title">Fill Color: </h1>
                <input type="color" id="myFillColor" onchange="fillColor()">
              </div>
              <h1 id="actual-f-color"></h1>
            </div>
            <div id="save-restore-container">
              <div id="save-container">
                <button id="save-drawing">Save Artwork</button>
                <h1 id="has-saved"></h1>
              </div>
              <div id="restore-container">
                <h1 id="has-loaded"></h1>
                <button id="restore-drawing">Load Artwork</button>
              </div>
            </div>
          </div>
        </div>
        <div id="clear-container">
          <button id="clear-but">Clear</button>
        </div>
      </div>
      <div id="canvas-back">
        <div id="nav-container">
          <div id="how-to-container">
            <button id="no-how-to-but" onclick="pageTransfer(document.getElementById('how-to-but').textContent)">How To</button>
          </div>
          <div id="start-how-to-container">
            <div id="inside-canv-cont">
              <button id="start-how-to-but" onclick="pageTransfer(document.getElementById('start-how-to-but').textContent)">How To</button>
              <button id="close-how-but" onclick="xOut()">X</button>
            </div>
          </div>
          <div id="github-container">
            <a id="github" href="https://github.com/Nathan-Reinhardt/Canvas-Shape-Creator" target="_blank"><img src="data:image/png;base64,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"></a>
          </div>
        </div>
        <canvas id="canv" width="800" height="550"></canvas>
      </div>
    </div>
  </div>
  <!-- how to page -->
  <div id="no-how-to-page">
    <div id="how-title-container">
      <h1 id="how-title">How To</h1>
    </div>
    <div id="how-content-container">
      <div id="draw-how-container">
        <div id="td-cont">
          <h1 id="background-titles">Draw</h1>
        </div>
        <p id="draw-first-p">
          - Before drawing please close the "how to" on the canvas. At the top left of the screen is where you choose what drawing to work with.
        </p>
        <p id="draw-second-p">
          - Below is where you pick what shape you want to draw for this drawing.
        </p>
        <p id="draw-third-p">
          - You may start drawing on the canvas now.
        </p>
        <p id="draw-fourth-p">
          - Below the shape picker, in the Pen Settings Box, you can choose which attributes you wanna add onto your current shape. 
          This includes color, filling the inside, and line width.
        </p>
        <p id="draw-fifth-p">
          - You are allowed to work with a max of 3 drawings currently. Same with the shapes, there are 3
          different types of shapes to choose from.
        </p>
        <p id="draw-sixth-p">
          - The next section will explain what the save/load does and clear feature.
        </p>
      </div>
      <div id="how-detail-container">
        <h1 id="detail-h1">.</h1>
        <h1 id="detail-h2">.</h1>
        <h1 id="detail-h3">.</h1>
      </div>
      <div id="save-load-container">
        <div id="td-cont">
          <h1 id="background-titles">Save and Load</h1>
        </div>
        <p id="saveload-first-p">
          - The save/load feature works with one or more drawings on the canvas. The buttons are located below the "Fill Color" in Pen Settings.
        </p>
        <p id="saveload-second-p">
          - It will save every single detail of a shape from its position to all the properties applied to the drawing.
        </p>
        <p id="saveload-third-p">
          - Only can save for one save state meaning that if you save another artwork set, than the old save will be erased.
        </p>
        <p id="saveload-fourth-p">
          - Loading artwork will load the previous save that was created.
        </p>
        <p id="saveload-fifth-p">
          - The clear button at the bottom below the save and load buttons. It will clear any current shape you are working with
          and reset all the drawings attributes back to default values to restart from scratch.
        </p>
        <p id="saveload-sixth-p">
          - Clear feature does work with the save/load feature.
        </p>
      </div>
    </div>
    <div id="back-but-container">
      <button id="back-but" onclick="pageTransfer(document.getElementById('back-but').textContent)">Back To Canvas</button>
    </div>
  </div>

  <!-- these script tags are below cause they need html rendered to function. -->
  <script src="./assets/bundle.js"></script>
  <script type="module">
    import { returnFunction } from './assets/functions/return_function.mjs';
    // getting rid of the help how to prompt in front of the canvas
    if (localStorage.getItem("howTo") === "false") {
      xOut();
    }

    // slider script
    var slider = document.getElementById("myRange");
    var output = document.getElementById("line-w");
    output.innerHTML = slider.value;
    
    slider.oninput = function() {
      output.innerHTML = this.value;
      localStorage.setItem("lineWidth", this.value);
    }

    // cursor event listeners
    // getting mouse cursor positions
    const getCursorPositionDown = (canvas, event) => {
        const rect = canvas.getBoundingClientRect();
        let clickstate = "D";
        let x = event.clientX - rect.left;
        let y = event.clientY - rect.top;
        settingCoords(x, y, clickstate);
    }

    const getCursorPositionUp = (canvas, event) => {
        const rect = canvas.getBoundingClientRect();
        let clickstate = "U";
        let x = event.clientX - rect.left;
        let y = event.clientY - rect.top;
        settingCoords(x, y, clickstate);
        returnFunction();
    }
    
    // helper function for getCursorPosition Functions
    const settingCoords = (x, y, clickstate) => {
      if (localStorage.getItem("CurrD") === "D1") {
        localStorage.setItem("D" + clickstate + "1X", x);
        localStorage.setItem("D" + clickstate + "1Y", y);
      }

      else if (localStorage.getItem("CurrD") === "D2") {
        localStorage.setItem("D" + clickstate + "2X", x);
        localStorage.setItem("D" + clickstate + "2Y", y);
      }

      else if (localStorage.getItem("CurrD") === "D3") {
        localStorage.setItem("D" + clickstate + "3X", x);
        localStorage.setItem("D" + clickstate + "3Y", y);
      }
    }

    var bool = false;
    const drawcanv = document.getElementById('canv');

    // stops drawing the shape
    const stopDrawing = (event) => {
      if (bool === true) {
        bool = false;
        localStorage.setItem("downBool", "false");
        localStorage.setItem("opacity", "false");
        getCursorPositionUp(drawcanv, event);
        localStorage.setItem("resetopacity", "true");
        getCursorPositionUp(drawcanv, event);
      }
    }

    if (localStorage.getItem("howTo") === "false") {
      drawcanv.addEventListener('mousedown', (e) => {
        document.getElementById("has-loaded").innerHTML = "";
        bool = true;
        localStorage.setItem("downBool", "true");
        localStorage.setItem("opacity", "true");
        localStorage.setItem("resetopacity", "false");
        getCursorPositionDown(drawcanv, e);
      })

      drawcanv.addEventListener('mousemove', (e) => {
        if (localStorage.getItem("downBool") === "true") {
          getCursorPositionUp(drawcanv, e);
        }
      })

      drawcanv.addEventListener('mouseup', (e) => {
        stopDrawing(e);
      })

      drawcanv.addEventListener('mouseout', (e) => {
        stopDrawing(e);
      })
    }
  </script>

  <!-- this module script is used to put event listeners on the buttons -->
  <script type="module">
    import { buttonFunction } from './assets/functions/button_event.mjs';

    var drawing1 = document.getElementById('drawing-1');
    var drawing2 = document.getElementById('drawing-2');
    var drawing3 = document.getElementById('drawing-3');
    var box = document.getElementById('box');
    var pentagon = document.getElementById('pentagon');
    var star = document.getElementById('star');
    var clear = document.getElementById('clear-but');
    var saveDrawing = document.getElementById('save-drawing');
    var restoreDrawing = document.getElementById('restore-drawing');

    if (drawing1) {
      drawing1.addEventListener('click', (e) => {
        buttonFunction(document.getElementById('drawing-1').textContent);
      });
    }
    if (drawing2) {
      drawing2.addEventListener('click', (e) => {
        buttonFunction(document.getElementById('drawing-2').textContent);
      });
    }
    if (drawing3) {
      drawing3.addEventListener('click', (e) => {
        buttonFunction(document.getElementById('drawing-3').textContent);
      });
    }
    if (box) {
      box.addEventListener('click', (e) => {
        buttonFunction(document.getElementById('box').textContent);
      });
    }
    if (pentagon) {
      pentagon.addEventListener('click', (e) => {
        buttonFunction(document.getElementById('pentagon').textContent);
      });
    } 
    if (star) {
      star.addEventListener('click', (e) => {
        buttonFunction(document.getElementById('star').textContent);
      });
    }
    if (clear) {
      clear.addEventListener('click', (e) => {
        buttonFunction(document.getElementById('clear-but').textContent);
      });
    }
    if (saveDrawing) {
      saveDrawing.addEventListener('click', (e) => {
        buttonFunction(document.getElementById('save-drawing').textContent);
      });
    }
    if (restoreDrawing) {
      restoreDrawing.addEventListener('click', (e) => {
        buttonFunction(document.getElementById('restore-drawing').textContent);
      });
    }
  </script>
</body>
</html>