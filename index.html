<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script type="application/javascript" src="./assets/nonrel_functions.js"></script>
  <script type="application/javascript" src="./assets/functions.js"></script>
  <link rel="stylesheet" href="./stylesheets/reset.css">
  <link rel="stylesheet" href="./stylesheets/title.css">
  <link rel="stylesheet" href="./stylesheets/canvas.css">
  <link rel="stylesheet" href="./stylesheets/slider.css">
  <link rel="stylesheet" href="./stylesheets/buttons.css">
  <link rel="stylesheet" href="./stylesheets/background.css">
  <link rel="stylesheet" href="./stylesheets/colorpicker.css">
  <title>Canvas App</title>
</head>
<body onload="returnFunction()">
  <div id="root">
    <div id="nav-container">
      <div id="title-container">
        <h1 id="current-selection"></h1>
      </div>
      <div id="github-container">
        <a id="github" href="https://github.com/Ticonderago/Javascript-Project" target="_blank">Draw Shapes Github</a>
      </div>
    </div>
    <div id="content-container">
      <div id="canvas-back">
        <canvas id="canv" width="800" height="550"></canvas>
        <div id="button-container">
          <button id="box" onclick="mainFunction(document.getElementById('box').textContent)">Box</button>
          <button id="pentagon" onclick="mainFunction(document.getElementById('pentagon').textContent)">Pentagon</button>
          <button id="star" onclick="mainFunction(document.getElementById('star').textContent)">Star</button>
        </div>
      </div>
      <div id="page-detail-bar">
        <h1 id="first-detail">.</h1>
        <h1 id="second-detail">.</h1>
        <h1 id="third-detail">.</h1>
        <h1 id="fourth-detail">.</h1>
        <h1 id="fifth-detail">.</h1>
      </div>
      <div id="side-bar">
        <div id="app-background">
          <h1 id="background-title">Background</h1>
          <p id="background-info-f">This project uses a Canvas to let the user draw multiple drawings</p>
          <p id="background-info-r">
            given the inputs on the sidebar and picking what shape to draw. To draw a shape go to
            the bottom left of the page to select which shape to draw. Once selected you can pick what 
            attributes you want on the drawing. Now you can use your mouse to click on the canvas, drag 
            while holding, than let go to draw your shape. To change what drawing you are working with 
            go to the bottom right and click on "Drawing #3" as an example. This allows you to work with 
            more than one shape. You can save and load your shapes. Only allowed one save artwork at a time.
          </p>
        </div>
        <div id="slide-container">
          <p id="p-w">Line Width: <span id="line-w"></span></p>
          <input type="range" min="0" max="35" value="0" class="slider" id="myRange">
          <div id="checkbox-container">
            <h1 id="fill-title">Fill Shape: </h1>
            <input type="checkbox" id="myCheck" onchange="check()">
          </div>
          <div id="all-lc-container">
            <div id="line-color-container">
              <h1 id="line-color-title">Line Color: </h1>
              <input type="color" id="myColor" onchange="lineColor()">
            </div>
            <h1 id="actual-l-color"></h1>
          </div>
          <div id="all-fc-container">
            <div id="fill-color-container">
              <h1 id="fill-color-title">Fill Color: </h1>
              <input type="color" id="myFillColor" onchange="fillColor()">
            </div>
            <h1 id="actual-f-color"></h1>
          </div>
          <div id="save-restore-container">
            <div id="save-container">
              <button id="save-drawing" onclick="mainFunction(document.getElementById('save-drawing').textContent)">Save Artwork</button>
              <h1 id="has-saved"></h1>
            </div>
            <div id="restore-container">
              <h1 id="has-loaded"></h1>
              <button id="restore-drawing" onclick="mainFunction(document.getElementById('restore-drawing').textContent)">Load Artwork</button>
            </div>
          </div>
        </div>
        <div id="clear-container">
          <button id="clear-but" onclick="mainFunction(document.getElementById('clear-but').textContent)">Clear</button>
        </div>
        <div id="curr-drawing-cont">
          <h1 id="current-drawing"></h1>
        </div>
        <div id="drawing-but-container">
          <button id="drawing-1" onclick="mainFunction(document.getElementById('drawing-1').textContent)">Drawing #1</button>
          <button id="drawing-2" onclick="mainFunction(document.getElementById('drawing-2').textContent)">Drawing #2</button>
          <button id="drawing-3" onclick="mainFunction(document.getElementById('drawing-3').textContent)">Drawing #3</button>
        </div>
      </div>
    </div>
  </div>

  <!-- these script tags are below cause they need html rendered to function. -->
  <script type="application/javascript" src="./assets/refresh.js"></script>
  <script>
    // slider script
    var slider = document.getElementById("myRange");
    var output = document.getElementById("line-w");
    output.innerHTML = slider.value;
    
    slider.oninput = function() {
      output.innerHTML = this.value;
      localStorage.setItem("lineWidth", this.value)
    }

    // cursor event listeners
    var bool = false;
    const drawcanv = document.getElementById('canv')

    drawcanv.addEventListener('mousedown', (e) => {
      bool = true;
      localStorage.setItem("downBool", "true");
      localStorage.setItem("opacity", "true");
      localStorage.setItem("resetopacity", "false");
      getCursorPositionDown(drawcanv, e);
    })

    drawcanv.addEventListener('mousemove', (e) => {
      if (localStorage.getItem("downBool") === "true") {
        getCursorPositionUp(drawcanv, e);
      }
    })

    drawcanv.addEventListener('mouseup', (e) => {
      bool = false;
      localStorage.setItem("downBool", "false");
      localStorage.setItem("opacity", "false");
      getCursorPositionUp(drawcanv, e);
      localStorage.setItem("resetopacity", "true");
      getCursorPositionUp(drawcanv, e);
    })

    drawcanv.addEventListener('mouseout', (e) => {
      if (bool === true) {
        bool = false;
        localStorage.setItem("downBool", "false");
        localStorage.setItem("opacity", "false");
        getCursorPositionUp(drawcanv, e);
        localStorage.setItem("resetopacity", "true");
        getCursorPositionUp(drawcanv, e);
      }
    })
  </script>

</body>
</html>