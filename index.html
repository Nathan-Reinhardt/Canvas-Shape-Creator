<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script type="application/javascript" src="./assets/nonrel_functions.js"></script>
  <link rel="stylesheet" href="./stylesheets/reset.css">
  <link rel="stylesheet" href="./stylesheets/title.css">
  <link rel="stylesheet" href="./stylesheets/canvas.css">
  <link rel="stylesheet" href="./stylesheets/slider.css">
  <link rel="stylesheet" href="./stylesheets/buttons.css">
  <link rel="stylesheet" href="./stylesheets/background.css">
  <link rel="stylesheet" href="./stylesheets/colorpicker.css">
  <link rel="stylesheet" href="./stylesheets/howtopage.css">
  <title>Canvas App</title>
</head>
<body>
  <div id="root">
    <div id="content-container">
      <div id="side-bar">
        <div id="curr-drawing-cont">
          <h1 id="current-drawing"></h1>
        </div>
        <div id="drawing-but-container">
          <button id="drawing-1" onclick="mainFunction(document.getElementById('drawing-1').textContent)">Drawing #1</button>
          <button id="drawing-2" onclick="mainFunction(document.getElementById('drawing-2').textContent)">Drawing #2</button>
          <button id="drawing-3" onclick="mainFunction(document.getElementById('drawing-3').textContent)">Drawing #3</button>
        </div>
        <div id="select-shape-container">
          <h1 id="current-selection"></h1>
        </div>
        <div id="button-container">
          <button id="box" onclick="mainFunction(document.getElementById('box').textContent)">Box</button>
          <button id="pentagon" onclick="mainFunction(document.getElementById('pentagon').textContent)">Pentagon</button>
          <button id="star" onclick="mainFunction(document.getElementById('star').textContent)">Star</button>
        </div>
        <div id="slide-container">
          <p id="p-w">Line Width: <span id="line-w"></span></p>
          <input type="range" min="4" max="35" value="5" class="slider" id="myRange">
          <div id="checkbox-container">
            <h1 id="fill-title">Fill Shape: </h1>
            <input type="checkbox" id="myCheck" onchange="check()">
          </div>
          <div id="all-lc-container">
            <div id="line-color-container">
              <h1 id="line-color-title">Line Color: </h1>
              <input type="color" id="myColor" onchange="lineColor()">
            </div>
            <h1 id="actual-l-color"></h1>
          </div>
          <div id="all-fc-container">
            <div id="fill-color-container">
              <h1 id="fill-color-title">Fill Color: </h1>
              <input type="color" id="myFillColor" onchange="fillColor()">
            </div>
            <h1 id="actual-f-color"></h1>
          </div>
          <div id="save-restore-container">
            <div id="save-container">
              <button id="save-drawing" onclick="mainFunction(document.getElementById('save-drawing').textContent)">Save Artwork</button>
              <h1 id="has-saved"></h1>
            </div>
            <div id="restore-container">
              <h1 id="has-loaded"></h1>
              <button id="restore-drawing" onclick="mainFunction(document.getElementById('restore-drawing').textContent)">Load Artwork</button>
            </div>
          </div>
        </div>
        <div id="clear-container">
          <button id="clear-but" onclick="mainFunction(document.getElementById('clear-but').textContent)">Clear</button>
        </div>
      </div>
      <div id="page-detail-bar">
        <h1 id="first-detail">.</h1>
        <h1 id="second-detail">.</h1>
        <h1 id="third-detail">.</h1>
        <h1 id="fourth-detail">.</h1>
        <h1 id="fifth-detail">.</h1>
        <h1 id="sixth-detail">.</h1>
        <h1 id="seventh-detail">.</h1>
      </div>
      <div id="canvas-back">
        <div id="nav-container">
          <div id="how-to-container">
            <button id="how-to-but" onclick="pageTransfer(document.getElementById('how-to-but').textContent)">How To</button>
          </div>
          <div id="github-container">
            <a id="github" href="https://github.com/Ticonderago/Javascript-Project" target="_blank">Draw Shapes Github</a>
          </div>
        </div>
        <canvas id="canv" width="800" height="550"></canvas>
      </div>
    </div>
  </div>
  <div id="no-how-to-page">
    <div id="back-but-container">
      <button id="back-but" onclick="pageTransfer(document.getElementById('back-but').textContent)">Back</button>
    </div>
    <div id="how-title-container">
      <h1 id="how-title">How To</h1>
    </div>
    <div id="how-content-container">
      <div id="draw-how-container">
        <div id="td-cont">
          <h1 id="title-draw">Draw</h1>
        </div>
        <p id="draw-first-p">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
        </p>
        <p id="draw-second-p">
          eiusmod tempor incididunt ut labore et dolore magna aliqua.
          Vulputate mi sit amet mauris commodo quis imperdiet.
          Fermentum odio eu feugiat pretium nibh ipsum. Augue ut lectus
          arcu bibendum at varius vel pharetra vel. Lectus arcu bibendum
          at varius. Diam donec adipiscing tristique risus nec feugiat in.
          Eget mauris pharetra et ultrices. Commodo viverra maecenas
          accumsan lacus vel facilisis volutpat. Eleifend mi in nulla
          posuere sollicitudin. Elementum nibh tellus molestie nunc non.
        </p>
        <p id="draw-third-p"></p>
      </div>
      <div id="how-detail-container">
        <h1 id="detail-h1">.</h1>
        <h1 id="detail-h2">.</h1>
        <h1 id="detail-h3">.</h1>
      </div>
      <div id="save-load-container">
        <h1 id="title-SL">Save and Load</h1>
      </div>
    </div>
  </div>

  <!-- these script tags are below cause they need html rendered to function. -->
  <script type="application/javascript" src="./assets/functions.js"></script>
  <script>
    // slider script
    var slider = document.getElementById("myRange");
    var output = document.getElementById("line-w");
    output.innerHTML = slider.value;
    
    slider.oninput = function() {
      output.innerHTML = this.value;
      localStorage.setItem("lineWidth", this.value)
    }

    // cursor event listeners
    // getting mouse cursor positions

    const getCursorPositionDown = (canvas, event) => {
        const rect = canvas.getBoundingClientRect();
        let x = event.clientX - rect.left;
        let y = event.clientY - rect.top;

        if (localStorage.getItem("CurrD") === "D1") {
            localStorage.setItem("DD1X", x);
            localStorage.setItem("DD1Y", y);
        }

        else if (localStorage.getItem("CurrD") === "D2") {
            localStorage.setItem("DD2X", x);
            localStorage.setItem("DD2Y", y);
        }

        else if (localStorage.getItem("CurrD") === "D3") {
            localStorage.setItem("DD3X", x);
            localStorage.setItem("DD3Y", y);
        }
    }

    const getCursorPositionUp = (canvas, event) => {
        const rect = canvas.getBoundingClientRect();
        let x = event.clientX - rect.left;
        let y = event.clientY - rect.top;

        if (localStorage.getItem("CurrD") === "D1") {
            localStorage.setItem("DU1X", x);
            localStorage.setItem("DU1Y", y);
        }

        else if (localStorage.getItem("CurrD") === "D2") {
            localStorage.setItem("DU2X", x);
            localStorage.setItem("DU2Y", y);
        }

        else if (localStorage.getItem("CurrD") === "D3") {
            localStorage.setItem("DU3X", x);
            localStorage.setItem("DU3Y", y);
        }

        returnFunction();
    }

    var bool = false;
    const drawcanv = document.getElementById('canv')

    drawcanv.addEventListener('mousedown', (e) => {
      bool = true;
      localStorage.setItem("downBool", "true");
      localStorage.setItem("opacity", "true");
      localStorage.setItem("resetopacity", "false");
      getCursorPositionDown(drawcanv, e);
    })

    drawcanv.addEventListener('mousemove', (e) => {
      if (localStorage.getItem("downBool") === "true") {
        getCursorPositionUp(drawcanv, e);
      }
    })

    drawcanv.addEventListener('mouseup', (e) => {
      bool = false;
      localStorage.setItem("downBool", "false");
      localStorage.setItem("opacity", "false");
      getCursorPositionUp(drawcanv, e);
      localStorage.setItem("resetopacity", "true");
      getCursorPositionUp(drawcanv, e);
    })

    drawcanv.addEventListener('mouseout', (e) => {
      if (bool === true) {
        bool = false;
        localStorage.setItem("downBool", "false");
        localStorage.setItem("opacity", "false");
        getCursorPositionUp(drawcanv, e);
        localStorage.setItem("resetopacity", "true");
        getCursorPositionUp(drawcanv, e);
      }
    })
  </script>

</body>
</html>